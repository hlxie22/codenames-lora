name: codenames-lora
channels:
  - conda-forge

dependencies:
  - python=3.10
  - pip
  - git
  - git-lfs
  - setuptools
  - wheel

  # core utilities
  - numpy>=1.26
  - pyyaml>=6.0
  - tqdm
  - regex
  - scipy
  - pandas
  - psutil

  # keep these on conda to avoid pip/conda duplication
  - sentencepiece
  - protobuf

  - pip:
      # PyTorch CUDA wheels (keep as EXTRA index so PyPI still works)
      - --extra-index-url https://download.pytorch.org/whl/cu128
      - torch==2.7.0
      - torchvision==0.22.0
      - torchaudio==2.7.0

      # vLLM: pin to avoid pip grabbing latest (and trying to build from source)
      - vllm==0.9.2

      # HF stack
      - transformers==4.53.3
      - accelerate>=0.34.0
      - peft>=0.12.0
      - huggingface-hub>=0.25.0
      - safetensors>=0.4.3
      - tokenizers>=0.19.1

      # embeddings
      - sentence-transformers>=3.0.0

      # vocab builder
      - wordfreq>=3.1.0

      # tokenizer backend
      - tiktoken>=0.7.0